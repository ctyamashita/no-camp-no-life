
<div class="mt-5 col-12" data-bookings-target="garage">
  <h2>My cars</h2>
  <% Car.where(user: current_user).each do |car| %>
  <div class="card-category mt-3" style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url(<%= car.photo.attached? ? cl_image_path(car.photo.key) : '/assets/not-available.jpg' %>)">
  <%= car.car_model %>
  <%= link_to '', car_path(car), class: 'card-category-link' %>
  </div>
  <%= link_to "❌", car_path(car), method: :delete, data: { confirm: "Are you sure you want to delete?" }%>
  <% end %>

<%# <%= link_to car.car_model, car_path(car), class: 'btn btn-outline' %>

  <hr class="my-5">
  <h2>Booking requests</h2>
  <% if @cars.any? %>
  <% @cars.each do |booking| %>
    <div class="card-product mb-3 mt-3">
      <% if booking.car.photo.attached? %>
        <div style="background-image: url(<%= cl_image_path(booking.car.photo.key)%>); background-position: center; height: 120px; background-size: cover; width: 200px; padding: 0px;">
        </div>
      <% else %>
        <div style="background-image: url(/assets/not-available.jpg); filter: grayscale(100%); background-position: center; height: 120px; background-size: cover; width: 200px; padding: 0px;"></div>
      <% end %>
      <div class="d-flex w-100 card-product-infos justify-content-evenly align-items-center text-center">
        <div class="max-width">
          <h2><%= booking.car.car_model %></h2>
        </div>
        <div class="border-end pe-3">
          <p><i class="md-icon mb-2 fas fa-envelope"></i> Contact<br><strong><%= booking.car.user.email %></strong></p>
        </div>
        <div class="border-end px-5">
          <p><i class="md-icon mb-2 fas fa-calendar-alt"></i> From<br> <strong><%= booking.start_date %></strong></p>
        </div>
        <div class="border-end px-5">
          <p><i class="md-icon mb-2 fas fa-calendar-alt"></i> To<br> <strong><%= booking.end_date %></strong></p>
        </div>
        <div class="pe-5">
          <p><i class="md-icon mb-2 fas fa-shield-alt"></i> Status <br> <strong><%= booking.status %></strong></p>
        </div>
        <div class="border-start ps-5">
          <%= simple_form_for booking do |f| %>
            <%= f.input :status, collection: Booking.statuses.keys, include_blank: false, label: false:, input_html: { class: 'input small-input'} %>
            <%= f.submit class: 'btn btn-primario w-100 rounded-input' %>
          <% end %>
        </div>
      </div>
    </div>
  <% end %>
  <% else %>
    <p>No reservations made.</p>
  <% end %>
</div>
